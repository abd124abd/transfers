CREATE TABLE users (
  id INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
  username TEXT NOT NULL,
  password VARCHAR(100) NOT NULL,
  date_created TIMESTAMPTZ DEFAULT now() NOT NULL
);

CREATE TABLE transfers (
  id INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
  date_created TIMESTAMPTZ DEFAULT now() NOT NULL,
  sender int REFERENCES users(id) ON DELETE CASCADE ON UPDATE CASCADE NOT NULL,
  receiver int REFERENCES users(id) ON DELETE CASCADE ON UPDATE CASCADE NOT NULL,
  amount DECIMAL(8,2) NOT NULL
);

CREATE TABLE payees (
  PRIMARY KEY (sender, payee),
  sender int REFERENCES users(id) ON DELETE CASCADE ON UPDATE CASCADE NOT NULL,
  payee int REFERENCES users(id) ON DELETE CASCADE ON UPDATE CASCADE NOT NULL
);
